<!DOCTYPE HTML>
<html>
<body>
    <script language="javascript" src="xx_data.js"></script>
    <script language="javascript" src="pkg_generic.js"></script>
    <script language="javascript" src="pkg_lobby_client.js"></script>

    <script language="javascript">

        {
            let c = new Lobby_Client_GameClose();
            c.gameIds.push(1, 2, 3);

            let d = new Data();
            d.WriteRoot(c);
            console.log(d.View());

            let c2 = d.ReadRoot();

            console.log(c);
            console.log(c2);
        }


        {
            let c = new Lobby_Client_GameOpen();
            let gi = new Generic_GameInfo();
            gi.gameId = 1;
            gi.info = "asdfff";
            c.gameInfos.push(gi);
            gi = new Generic_GameInfo();
            gi.gameId = 2;
            gi.info = "qwerrrr";
            c.gameInfos.push(gi);

            let d = new Data();
            d.WriteRoot(c);
            console.log(d.View());

            let c2 = d.ReadRoot();

            console.log(c);
            console.log(c2);
        }




        console.log("done");




        ///* ************************************************************ */
        //// 下面是生成物模拟
        //var CodeGen_cfgName_md5 = "!@#$@$@#$$!@#!@#@#!@#!$#@%@#%#$^#%$#%@%";

        //// enum 模拟
        //class E {
        //    static a = 1;
        //    static b = 2;
        //}

        //// pkg
        //class A extends ObjBase {
        //    static typeId = 111;

        //    int32 = -1;
        //    int64 = -1n;

        //    Read(d) {
        //        this.int32 = d.Rvi();
        //        this.int64 = d.Rvi64();
        //    }
        //    Write(d) {
        //        d.Wvi(this.int32);
        //        d.Wvi64(this.int64);
        //    }
        //}
        //Data.Register(A);

        //// pkg
        //class B extends A {
        //    static typeId = 222;

        //    name = "asdf";
        //    e = E.b;

        //    Read(d) {
        //        super.Read(d);
        //        this.name = d.Rstr();
        //        this.e = d.Rvi();
        //    }
        //    Write(d) {
        //        super.Write(d);
        //        d.Wstr(this.name);
        //        d.Wvi(this.e);
        //    }
        //}
        //Data.Register(B);

        //// struct
        //class XY {
        //    x = 1.2;
        //    y = 3.4;

        //    Read(d) {
        //        this.x = d.Rd();
        //        this.y = d.Rd();
        //    }
        //    Write(d) {
        //        d.Wd(this.x);
        //        d.Wd(this.y);
        //    }
        //}

        //// pkg
        //class C extends ObjBase {
        //    static typeId = 333;

        //    b = null; // B
        //    c = null; // C
        //    xy = new XY();

        //    Read(d) {
        //        this.b = d.Read();
        //        this.c = d.Read();
        //        this.xy.Read(d);
        //    }
        //    Write(d) {
        //        d.Write(this.b);
        //        d.Write(this.c);
        //        this.xy.Write(d);
        //    }
        //}
        //Data.Register(C);


        //console.log(Data.fs);



        //let c = new C();
        //c.b = new B();
        //c.c = c;

        //let d = new Data();
        //d.WriteRoot(c);
        //console.log(d.View());

        //let c2 = d.ReadRoot();

        //console.log(c);
        //console.log(c2);

        //console.log("done");




            //console.log(a instanceof A);
            //console.log(b instanceof A);
            //console.log(a instanceof B);
            //console.log(b instanceof B);


            //console.log(a.GetTypeId());
            //console.log(b.GetTypeId());

            //console.log(a);
            //console.log(b);


            //var Dump = function (tar) {
            //    for (let v of Object.entries(tar)) {
            //        console.log(v);
            //    }
            //}

            ////console.log(a.Read());
            //console.log(b.Read());

            //let d = new Data();
            //Dump(d);

            //let uint8array = Data.te.encode("asdf");
            //console.log(uint8array);




            //let d1 = new Data();
            //let p = d1.Wj(4);
            //d1.Wstr("abcde");
            //d1.Wu8(123);
            //d1.Wu8(12);
            //d1.Wu32at(p, d1.len - 4);

            //d1.offset = 4;
            //console.log(d1.Rstr());
            //console.log(d1.Ru8());
            //console.log(d1.Ru8());
            //console.log(d1.View());


            //let d = new Data();
            //console.log(d);
            //console.log(d.len);
            //d.Wstr("asdf");
            //console.log(d.len);
            //d.Wf(1);
            //console.log(d.len);
            //d.Wd(1);
            //console.log(d.len);
            //d.Wdata(d1);
            //console.log(d.len);

            //console.log(d.Rstr());
            //console.log(d.Rf());
            //console.log(d.Rd());
            //console.log(d.Rdata());
            //console.log(d.View());



    </script>
</body>
</html>